<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <title>用户登录</title>
  <!-- 需要加载的css文件 -->
  <link rel="stylesheet" type="text/css" href="/Public/Css/admin.css" />
  <js href="__PUBLIC__/Js/jquery-1.9.0.min.js" />
</head>
<body>
  <div class="admin_login">
    <div class="admin_login_header">
      <img src="/Public/Img/admin/admin_logo.png">
    </div>
    <div class="admin_login_form">
      <form id="login_form" class="form-horizontal settingform">
        <div class="control-group">
          <label class="control-label">邮箱</label>
          <div class="controls">
            <input type="text" name="email" id="email" class="input-xlarge">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label">用户密码</label>
          <div class="controls">
            <input type="password" name="password" id="password" class="input-xlarge">
          </div>
        </div>
        <div class="form-actions">
          <button id="submit" class="btn btn-success" type="submit">登录</button>
          <div id='error'></div>
        </div>
      </form>
    </div>
  </div>
  <script type="text/javascript">
        $(document).ready(function() {
            $('#submit').click(function() {
              if($('#email').val() == '' || $('#password').val() == ''){
                  $('#error').html('邮箱或密码不能为空');
                  return false;
              }
              $.ajax({
                  url: "{:U('Login/admin_login')}",
                  type: 'post',
                  dataType: 'json',
                  data: $('#login_form').serialize(),
                  success: function(result){
                      if (!result[0]) {
                          $('#error').html(result[1]);
                      }else{
                        window.location = '/admin.php/Index'
                      };
                  }
              });
              return false;             
            });
        });
  </script>
</body>
</html>